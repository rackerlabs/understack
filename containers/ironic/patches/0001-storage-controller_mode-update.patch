From 945b35f790a24613e9f6833d0de67526ea899f86 Mon Sep 17 00:00:00 2001
From: Milan Fencik <mila6318@C02G958KMD6R.lan>
Date: Tue, 21 Oct 2025 18:09:56 +0100
Subject: [PATCH] when contoller doesn't have controller_mode, return None

Signed-off-by: Milan Fencik <milan.fencik@rackspace.co.uk>
---
 sushy_oem_idrac/resources/system/storage/controller.py | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/sushy_oem_idrac/resources/system/storage/controller.py b/sushy_oem_idrac/resources/system/storage/controller.py
index 6cc13ba..8e12e52 100644
--- a/sushy_oem_idrac/resources/system/storage/controller.py
+++ b/sushy_oem_idrac/resources/system/storage/controller.py
@@ -38,7 +38,11 @@ class DellStorageControllerExtension(oem_base.OEMResourceBase):
         :returns: TaskMonitor if controller mode changes applied and need to
             reboot, otherwise None
         """
-        controller_mode = self.dell_storage_controller.controller_mode
+        # Some controllers do not have controller_mode
+        try:
+            controller_mode = self.dell_storage_controller.controller_mode
+        except AttributeError:
+            return None
 
         # BOSS will have this empty, PERC will have something assigned
         if controller_mode and controller_mode != s_cons.ControllerMode.RAID:
-- 
2.39.2 (Apple Git-143)
