# Default values for understackdb.
instanceName: mariadb
rootPasswordSecretKeyRef:
  name: mariadb
  key: root-password
  generate: false

storage:
  size: 10Gi
  resizeInUseVolumes: true
  waitForVolumeResize: true

# renovate: image:mariadb
image: mariadb:11.0.3
imagePullPolicy: IfNotPresent

# contents of my.cnf
myCnf: |
  [mariadb]
  bind-address=*
  default_storage_engine=InnoDB
  binlog_format=row
  innodb_autoinc_lock_mode=2
  max_allowed_packet=256M

metrics:
  enabled: true
  exporter:
    image: prom/mysqld-exporter:v0.15.1
    port: 9104
  passwordSecretKeyRef:
    key: password
    name: mariadb-metrics-password
    generate: true
  serviceMonitor: {}
  username: mariadb-metrics

# each users entry has following format and defaults:
# users:
#   - name: user_name   (required)
#     namespace: openstack
#     maxUserConnections: 0
#     retryInterval: 5s
#     extraConfig: {}            # use to specify any additional params
users:
  - name: glance
  - name: horizon
  - name: ironic
  - name: keystone
  - name: neutron
  - name: nova
  - name: placement

# each databases entry has following format and defaults:
# databases:
#   - name: dbname (required)
#     namespace: openstack
#     instanceName: mariadb    # or whatever instanceName value is
#     characterSet: utf8
#     collate: utf8_general_ci
#     retryInterval: 5s
#     extraConfig: {}            # use to specify any additional params

databases:
  - name: glance
  - name: horizon
  - name: ironic
  - name: keystone
  - name: neutron
  - name: nova
  - name: nova-api
  - name: nova-cell0
  - name: placement

grants:
  # each grants entry has following format and defaults:
  # grants:
  #   - name: grant_name   (required) the -grant suffix will be appended
  #     namespace: openstack
  #     table: "*"
  #     privileges: [ALL]
  #     grantOption: true
  #     retryInterval: 5s
  - name: glance
  - name: horizon
  - name: ironic
  - name: keystone
  - name: neutron
  - name: nova
  - name: nova-api
    username: nova
  - name: nova-cell0
    username: nova
  - name: placement
